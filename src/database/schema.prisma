generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum FileEntityType {
  IMAGE
  VIDEO
  FILE
  AUDIO
}

enum Permissions {
  READ
  WRITE
  DELETE
}

model File {
  id           Int            @id @default(autoincrement())
  name         String
  url          String
  optimizedUrl String
  extension    String
  entityType   FileEntityType @default(FILE)

  uploadedAt DateTime? @default(now())

  bucketId Int
  bucket   Bucket @relation(fields: [bucketId], references: [id])
}

model App {
  id          Int           @id @default(autoincrement())
  name        String
  permissions Permissions[] @default([READ, WRITE])
  createdAt   DateTime?     @default(now())

  bucketId Int    @unique
  bucket   Bucket @relation(fields: [bucketId], references: [id])
}

model Bucket {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  folder      String
  description String?
  isUpdated   Boolean? @default(false)

  createdAt DateTime? @default(now())
  updatedAt DateTime? @default(now())

  file File[]
  app  App[]
}
